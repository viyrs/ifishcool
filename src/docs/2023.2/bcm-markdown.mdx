---
title: 编程猫论坛 Markdown 插件
meta: 插件开发 · 编程猫 · Markdown
desc: 如何在编程猫社区里折腾出一套更顺手的发帖工具，以及它背后的设计取舍。
timeline: 2023.02
---

在编程猫社区发过几次长帖之后，我开始频繁遇到两个问题：

- 编辑器偶尔会“吃格式”，排版一乱整篇都不好看；
- 很多图文教程篇幅很长，用社区自带编辑器写起来既慢，发帖后可能会遇到排版问题。

> “能不能直接用 Markdown 写？这个可太好用了。”

于是，一个更完整的想法诞生了——做一套**论坛支持的 Markdown 插件**，既能享受 MD 写作体验，又能无缝发到社区里。

## 设计界面：把复杂流程拆成四块

- **第一次用的人**，从上往下看一遍说明，就能知道“怎么创建第一个帖子”；
- **已经上手的人**，只看自己关心的那一块，比如直接去“样式处理”里调高度；
- 不同阶段的操作都集中在自己对应的区域，不需要到处找按钮。

![](https://static.codemao.cn/pickduckpost/HJTkAmCai?hash=Fr5Ek8YZH1c43Sy7m-UNf4MsPFws)

界面里还有一个小心机：

> 如果你不打算真的发帖，只是想体验一下编辑器，可以点击 **[测试]本地 Markdown 帖子**。

这样之后，你在编辑器里做的所有操作都只存在本地，不会写入服务器，适合新手“随便乱玩”。

## 封面与 banner：帖子被点开前就讲清楚重点

做教程类内容时，我发现一个痛点：

- 很多读者是从活动页、合集页点进来的，他们只看到一条标题和一张缩略图；
- 如果标题太抽象，或者封面信息太少，很容易被“刷过去”。

于是我在编辑器里加了 **小 banner 链接** 和 **简要介绍** 两个字段，用来控制帖子在列表里的“第一眼印象”。

很多人好奇它们到底长什么样。可以直接看图：

![](https://static.codemao.cn/pickduckpost/ryX8RVRpo?hash=FphJF3UBqhW6zoY9fAIpY_0FKuiB)

这里有两个需要特别注意的点：

- 这些信息**发布后理论上不可修改**，后期调整主要是文章正文；
- 小 banner 图片可以用“同链接替换文件内容”的方式更新，但链接本身最好不要变。

简单说，就是：**发布前多确认一次，别把还没想好的文案写上去。**

## 创建第一个 Markdown 帖子：真正上手的那一步

当编辑器和后台接口都调通之后，我给自己设计了一条“从 0 到 1” 的使用流程，用来测试体验：

1. 在插件里先填写好**文章标题**和**分区**。
2. 在「初次使用」板块，点击 **正式创建 Markdown 帖子** 按钮。
3. 这一步会在服务器上真正创建一个新帖子，里面预置了一段默认说明文字。
4. 进入帖子后，我会把那段说明全部删除（前提是已经看懂），然后正式开始写文章。

![](https://static.codemao.cn/pickduckpost/BylkJHApj?hash=Fs0R4JuV0mvaK5RRZ5EkNvDLJYwW)

从体验的角度，这相当于给发帖流程加了一个很明确的“起点”：

- 点下按钮之前，一切都还是草稿和本地；
- 点完按钮之后，这篇文章就有了自己的服务器 ID，可以被后续的“预览、样式调整、后期维护”这几个模块串起来处理。

## 样式调整：让长文在社区里优雅地展开

Markdown 写起来很爽，但落到社区页面上，就会面临一个问题：

> 帖子到底要展示多高？是把内容全部展开，还是折叠一部分？

为了让创作者自己掌控展示效果，我在「样式处理」里做了这样一个小流程：

1. 写完文章后，先点击 **预览效果** 按钮。
2. 插件会弹出一个**模拟论坛界面**，把文章以接近实际的样子展示出来。
3. 通过左侧滚动条，手动调节可视高度，直到你觉得“刚好能展示完整要点”。
4. 记下这个高度值，关闭预览，在「样式处理」里填写 **帖子高度**。
5. 如果需要简介和 banner，就顺手在这里补上；不需要也可以留空。

![](https://static.codemao.cn/pickduckpost/r1itJBApo?hash=FvKyip32-YMC1qMi_x9QqpPmqRwQ)

这样做的好处是：

- **读者不会被一整块超长内容吓退**，又能看到足够多的信息判断“要不要点进来”；
- **作者可以在发帖前确认最终效果**，而不是发布之后才发现“高度不够”“图被截断”。

## 一键发布：从编辑器跳回社区

当标题、封面、正文、样式都确认好之后，最后一步就是发布：

1. 在编辑器底部点击 **发布** 按钮。
2. 正常情况下，等待几秒钟，浏览器会**自动跳转到帖子页面**，你能立刻看到线上效果。
3. 如果浏览器没有跳转，多半是拦截了新窗口：这时可以手动允许，或者自己打开帖子链接确认是否成功。

这一步看起来很简单，但对我来说象征意义挺大：

> 从“写在自己电脑上的 Markdown 文件”，正式变成了“挂在社区里的公开作品”。

## 后期维护：不删帖也能安心改内容

对长期写教程的人来说，后期维护其实比“首次发帖”更常见：改错字、补新内容、修复过期截图……

社区自带的编辑器的是不支持用户二次修改的，特别麻烦。

为了让这些操作尽量不打扰读者，我在编辑器底部做了一个「后期维护」板块：

1. 在这个区域，点击 **已创建** 旁边的下拉框，就能看到自己用编辑器发过的帖子列表。
2. 选中想修改的那一篇，点击 **导入帖子**，编辑器会自动把线上内容拉回本地。
3. 此时你可以像平时写 Markdown 一样修改正文，按回车或手动 `Ctrl + S` 即可保存并同步到服务器。
4. 如果刷新帖子页面后发现内容没更新，多半是**浏览器缓存**在作怪，清一下缓存或等一会儿就好。

![](https://static.codemao.cn/pickduckpost/ByhalHRps?hash=FgTKy6kk9ZV638WEDw9ocMmtZKE9)

这套机制的目标只有一个：

> 让“维护一篇老文章”这件事，变得和写一篇新文章一样自然，而不是每次都要纠结要不要删帖重发。

现在每次在编程猫社区看到有人用这套编辑器发长文、教程、活动攻略，我都会有一种很微妙的满足感：

> 这不只是一个“功能需求被实现了”，
> 更像是——**我把自己喜欢的写作体验，成功地移植到了另一个世界里。**
