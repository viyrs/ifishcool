---
title: CoCo编辑器Monaco插件
meta: 油猴插件 · Monaco · 编程猫
desc: 围绕 CoCo 控件开发痛点，我做了一款叫 CoJS.E 的油猴插件，从自动补全到一键导入，用更“工程化”的方式管理控件代码。
timeline: 2023.06
---

在玩 CoCo 编辑器做作品的时候，我一直有一个不太舒服的点：

- 控件商城里的东西很多，但想“看源码、学写法、做二次开发”就没那么方便；
- 想自己做一点更复杂的控件时，代码编辑体验也比较基础，缺少自动补全、代码提示之类的辅助。

我在点鸭社区发了一些控件相关的帖子之后，评论区经常有人问：

> “有没有办法直接把别人的控件代码导出来看看？”  
> “能不能做一个像 VSCode 那样有补全的编辑器？”

于是就有了 CoJS.E 这个想法：

> 做一套围绕 CoCo 的「代码中枢」，
> 让**自动补全、导入他人控件、导入本作品控件**都变成“点一下就行”的事情。

## 新版本预览：CoJS.E 上线

![](https://cdn-community.codemao.cn/47/community/UVHmiKrlm74yMDIzMDYyMjE0NTUyNi5wbmcxMDAw)

为 CoCo 打造的一套“代码中转站”，

能一键读取他人或自己的控件代码、做二次开发、再导回 CoCo。

你可以：

- 直接导入其他人编写的控件代码，在编辑器里学习、修改；
- 实时导入当前作品已存在的第三方控件代码，适配自己的应用；
- 当做一个更舒服的 CoCo 专用代码编辑器来用。

## CoCo 代码自动补全：从“记 API”到“看提示”

![](https://cdn-community.codemao.cn/47/community/UVHmiKrlm74yMDIzMDYxOTIzMTMzMy5wbmcxMDAw)

我和小伙伴会根据 CoCo 官方给出的开发文档，不断往 CoJS.E 里补充代码提示和说明：

- 输入组件名或 API 前缀时，自动弹出可选方法和参数；
- 悬停可以看到简单的注释说明，方便记忆；
- 对常用模式（比如事件绑定、属性设置）做了更顺手的补全模板。

## 一键导入他人编写的控件：从“复制粘贴”到“点击按钮”

![](https://cdn-community.codemao.cn/47/community/UVHmiKrlm74yMDIzMDYxOTEzNDMwNC5wbmcxMDAw)

在点鸭控件商城中，除了“一键导入控件”这种传统方式，我专门为 CoJS.E 加了一个入口：

- 在控件详情页选择 **导入到 CoJS.E**；
- 插件会自动把控件的代码拉到本地编辑器；
- 你可以在里面学习别人的写法、添加注释、做一些针对自己作品的改动；
- 确认没有问题后，再把编辑好的控件导回 CoCo 编辑器使用。

这比“先在网页里复制，再粘贴到别的地方整理”干净太多，也更不容易漏掉细节。

## 实时导入本作品里的第三方控件：不再来回刷新

![](https://cdn-community.codemao.cn/47/community/UVHmiKrlm74yMDIzMDYyMjE0NTczMi5wbmcxMDAw)

以前要看自己作品里已有控件的源码，往往要经历一堆切换和刷新。CoJS.E 里我尽量把这件事压缩成两步：

1. 打开作品，保证它已经保存到了云端；
2. 在插件里选择要导入的控件（支持可见控件和不可见控件），一键拉取代码。

整个过程**不需要刷新网页**，也不要求你退出当前编辑状态。

- 想快速查一下某个控件的逻辑？——点一次导入就能看到；
- 想修一个线上小 bug？——改完代码，再导回 CoCo 即可。

## 导入效果：从编辑器回到 CoCo

![](https://cdn-community.codemao.cn/47/community/UVHmiKrlm74yMDIzMDYxOTEzNDIyOC5wbmcxMDAw)

当你在 CoJS.E 里调好代码之后，只需要点击导入按钮，控件就会重新回到 CoCo 编辑器里。这个过程保持了：

- 原有控件在作品中的位置和基本配置；
- 你在 CoJS.E 里做的逻辑调整和优化；
- 尽量减少“导入一次就打乱整个作品”的风险。

## 超宽屏幕支持：给控件开发多一点呼吸感

在做更复杂的控件时，普通宽度的编辑器很快就会显得局促。我在插件里加入了**超宽屏幕模式**：

点击「超宽屏幕」之后，代码编辑区域会拉伸到更适合阅读和对比的宽度：

![](https://cdn-community.codemao.cn/47/community/UVHmiKrlm74yMDIzMDYxOTEzNDM1MC5wbmcxMDAw)

在这种布局下：

- 左右分栏更清晰，方便对比不同函数和事件处理；
- 横向滚动减少，长行代码的可读性更好。

### 发布与预览

调试完成后，建议通过 **分享到 QQ/微信** 的方式发布作品：

![](https://cdn-community.codemao.cn/47/community/UVHmiKrlm74yMDIzMDYxOTEzNDQ0MC5wbmcxMDAw)

这样在手机和桌面端都能比较真实地看到最终展示效果，方便继续微调。

## 无需审核的控件上传：让好东西更快被看到

在点鸭控件商城，任何人都可以上传自己制作的控件：

- 无需人工审核，上传即上架，极大降低了分享门槛；
- 如果是二次开发他人控件，只要事先征得原作者同意即可。

这也意味着：

> 只要你愿意分享，自己的小工具可以很快被更多人使用，
> 而 CoJS.E 则负责帮你**看懂、修改、维护**这些控件背后的代码。
